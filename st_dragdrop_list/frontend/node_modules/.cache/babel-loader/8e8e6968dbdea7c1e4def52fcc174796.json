{"ast":null,"code":"import _slicedToArray from\"/Users/marcblomvliet/AURAI/streamlit_components_custom/st_dragdrop_list/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/marcblomvliet/AURAI/streamlit_components_custom/st_dragdrop_list/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/marcblomvliet/AURAI/streamlit_components_custom/st_dragdrop_list/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";// (1) import Layer\nimport React from'react';import{Streamlit}from'streamlit-component-lib';import{Container,Draggable}from'react-smooth-dnd';import{Paper,Typography}from'@mui/material';// (2) Types Layer\nimport{jsx as _jsx}from\"react/jsx-runtime\";function defaultRenderItem(props,item){var _props$width;return/*#__PURE__*/_jsx(Paper,{sx:{width:(_props$width=props.width)!==null&&_props$width!==void 0?_props$width:'100%',backgroundColor:props.theme.backgroundColor,padding:1,border:\"1px solid \"+props.theme.textColor},children:/*#__PURE__*/_jsx(Typography,{color:props.theme.textColor,fontFamily:props.theme.font,children:item.name})});}var applyDrag=function applyDrag(arr,dropResult,initSort){var removedIndex=dropResult.removedIndex,addedIndex=dropResult.addedIndex,payload=dropResult.payload;if(removedIndex===null&&addedIndex===null)return arr;var result=_toConsumableArray(arr);var itemToAdd=payload;if(removedIndex!==null){itemToAdd=result.splice(removedIndex,1)[0];}if(addedIndex!==null){result.splice(addedIndex,0,itemToAdd);}if(initSort){return result.sort(function(a,b){return a.order-b.order;});}else{return result.map(function(item,idx){return _objectSpread(_objectSpread({},item),{},{order:idx});});}};// (3) DOM Layer\nvar ContainerComponent=function ContainerComponent(props){return/*#__PURE__*/_jsx(Container,{onDrop:function onDrop(e){var _props$initSort;return props.setItems(applyDrag(props.items,e,(_props$initSort=props.initSort)!==null&&_props$initSort!==void 0?_props$initSort:false));},children:props.items.map(function(item){var innerThemeProps={\"theme\":props.theme,\"width\":props.width};return/*#__PURE__*/_jsx(Draggable,{children:props.renderItem?props.renderItem(innerThemeProps,item):defaultRenderItem(innerThemeProps,item)},item.id);})});};// (4) Container Layer\nexport var ST_DragDropList=function ST_DragDropList(props){var _React$useState=React.useState(props.items),_React$useState2=_slicedToArray(_React$useState,2),items=_React$useState2[0],setItems=_React$useState2[1];React.useEffect(function(){Streamlit.setComponentValue(items);},[items]);return/*#__PURE__*/_jsx(ContainerComponent,_objectSpread({},_objectSpread(_objectSpread({},props),{},{items:items,setItems:setItems})));};export default ST_DragDropList;","map":{"version":3,"names":["React","Streamlit","Container","Draggable","Paper","Typography","jsx","_jsx","defaultRenderItem","props","item","_props$width","sx","width","backgroundColor","theme","padding","border","textColor","children","color","fontFamily","font","name","applyDrag","arr","dropResult","initSort","removedIndex","addedIndex","payload","result","_toConsumableArray","itemToAdd","splice","sort","a","b","order","map","idx","_objectSpread","ContainerComponent","onDrop","e","_props$initSort","setItems","items","innerThemeProps","renderItem","id","ST_DragDropList","_React$useState","useState","_React$useState2","_slicedToArray","useEffect","setComponentValue"],"sources":["/Users/marcblomvliet/AURAI/streamlit_components_custom/st_dragdrop_list/frontend/src/ST_DragDropList.tsx"],"sourcesContent":["// (1) import Layer\nimport React from 'react';\nimport { Streamlit, Theme } from 'streamlit-component-lib';\nimport { Container, Draggable, DropResult } from 'react-smooth-dnd';\nimport { Paper, Typography } from '@mui/material';\n\n// (2) Types Layer\nexport interface Item {\n    id: string\n    name: string\n    order: number\n}\n\nfunction defaultRenderItem(props: InnerThemeProps, item: Item): React.ReactElement {\n    return (\n        <Paper\n            sx={{\n                width: props.width ?? '100%',\n                backgroundColor: props.theme.backgroundColor,\n                padding: 1,\n                border: \"1px solid \" + props.theme.textColor,\n            }}\n        >\n            <Typography\n                color={props.theme.textColor}\n                fontFamily={props.theme.font}\n            >\n                {item.name}\n            </Typography>\n        </Paper>\n    )\n}\n\nconst applyDrag = (arr: Item[], dropResult: DropResult, initSort: boolean) => {\n    const { removedIndex, addedIndex, payload } = dropResult;\n    if (removedIndex === null && addedIndex === null) return arr;\n\n    const result = [...arr];\n    let itemToAdd = payload;\n\n    if (removedIndex !== null) {\n        itemToAdd = result.splice(removedIndex, 1)[0];\n    }\n\n    if (addedIndex !== null) {\n        result.splice(addedIndex, 0, itemToAdd);\n    }\n\n    if (initSort) {\n        return result.sort((a: Item, b: Item) => a.order - b.order)\n    } else {\n        return result.map((item: Item, idx: number) => {\n            return { ...item, order: idx };\n        });\n    }\n};\n\nexport type ContainerProps = {\n    items: Item[]\n    renderItem?: (theme: InnerThemeProps, item: Item) => React.ReactElement\n    initSort?: boolean\n} & InnerThemeProps\ntype InnerThemeProps = {\n    width?: string\n    theme: Theme\n}\ntype Props = {\n    setItems: React.Dispatch<React.SetStateAction<Item[]>>\n} & ContainerProps\n\n// (3) DOM Layer\nconst ContainerComponent: React.FC<Props> = (props: Props) => (\n\n    <Container\n        onDrop={(e: DropResult) => props.setItems(applyDrag(props.items, e, props.initSort ?? false))}\n    >\n        {\n            props.items.map((item: Item) => {\n                const innerThemeProps: InnerThemeProps = { \"theme\": props.theme, \"width\": props.width }\n                return (\n                    <Draggable key={item.id}>\n                        {props.renderItem ? props.renderItem(innerThemeProps, item) : defaultRenderItem(innerThemeProps, item)}\n                    </Draggable>\n                );\n            })\n        }\n    </Container >\n)\n\n// (4) Container Layer\nexport const ST_DragDropList: React.FC<ContainerProps> = props => {\n    const [items, setItems] = React.useState(props.items);\n    React.useEffect(() => {\n        Streamlit.setComponentValue(items)\n    }, [items])\n    return <ContainerComponent {...{ ...props, items, setItems }} />\n}\n\nexport default ST_DragDropList;\n"],"mappings":"yfAAA;AACA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,KAAe,yBAAyB,CAC1D,OAASC,SAAS,CAAEC,SAAS,KAAoB,kBAAkB,CACnE,OAASC,KAAK,CAAEC,UAAU,KAAQ,eAAe,CAEjD;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBAOA,QAAS,CAAAC,iBAAiBA,CAACC,KAAsB,CAAEC,IAAU,CAAsB,KAAAC,YAAA,CAC/E,mBACIJ,IAAA,CAACH,KAAK,EACFQ,EAAE,CAAE,CACAC,KAAK,EAAAF,YAAA,CAAEF,KAAK,CAACI,KAAK,UAAAF,YAAA,UAAAA,YAAA,CAAI,MAAM,CAC5BG,eAAe,CAAEL,KAAK,CAACM,KAAK,CAACD,eAAe,CAC5CE,OAAO,CAAE,CAAC,CACVC,MAAM,CAAE,YAAY,CAAGR,KAAK,CAACM,KAAK,CAACG,SACvC,CAAE,CAAAC,QAAA,cAEFZ,IAAA,CAACF,UAAU,EACPe,KAAK,CAAEX,KAAK,CAACM,KAAK,CAACG,SAAU,CAC7BG,UAAU,CAAEZ,KAAK,CAACM,KAAK,CAACO,IAAK,CAAAH,QAAA,CAE5BT,IAAI,CAACa,IAAI,CACF,CAAC,CACV,CAAC,CAEhB,CAEA,GAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAIC,GAAW,CAAEC,UAAsB,CAAEC,QAAiB,CAAK,CAC1E,GAAQ,CAAAC,YAAY,CAA0BF,UAAU,CAAhDE,YAAY,CAAEC,UAAU,CAAcH,UAAU,CAAlCG,UAAU,CAAEC,OAAO,CAAKJ,UAAU,CAAtBI,OAAO,CACzC,GAAIF,YAAY,GAAK,IAAI,EAAIC,UAAU,GAAK,IAAI,CAAE,MAAO,CAAAJ,GAAG,CAE5D,GAAM,CAAAM,MAAM,CAAAC,kBAAA,CAAOP,GAAG,CAAC,CACvB,GAAI,CAAAQ,SAAS,CAAGH,OAAO,CAEvB,GAAIF,YAAY,GAAK,IAAI,CAAE,CACvBK,SAAS,CAAGF,MAAM,CAACG,MAAM,CAACN,YAAY,CAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CACjD,CAEA,GAAIC,UAAU,GAAK,IAAI,CAAE,CACrBE,MAAM,CAACG,MAAM,CAACL,UAAU,CAAE,CAAC,CAAEI,SAAS,CAAC,CAC3C,CAEA,GAAIN,QAAQ,CAAE,CACV,MAAO,CAAAI,MAAM,CAACI,IAAI,CAAC,SAACC,CAAO,CAAEC,CAAO,QAAK,CAAAD,CAAC,CAACE,KAAK,CAAGD,CAAC,CAACC,KAAK,GAAC,CAC/D,CAAC,IAAM,CACH,MAAO,CAAAP,MAAM,CAACQ,GAAG,CAAC,SAAC7B,IAAU,CAAE8B,GAAW,CAAK,CAC3C,OAAAC,aAAA,CAAAA,aAAA,IAAY/B,IAAI,MAAE4B,KAAK,CAAEE,GAAG,GAChC,CAAC,CAAC,CACN,CACJ,CAAC,CAeD;AACA,GAAM,CAAAE,kBAAmC,CAAG,QAAtC,CAAAA,kBAAmCA,CAAIjC,KAAY,qBAErDF,IAAA,CAACL,SAAS,EACNyC,MAAM,CAAE,SAAAA,OAACC,CAAa,MAAAC,eAAA,OAAK,CAAApC,KAAK,CAACqC,QAAQ,CAACtB,SAAS,CAACf,KAAK,CAACsC,KAAK,CAAEH,CAAC,EAAAC,eAAA,CAAEpC,KAAK,CAACkB,QAAQ,UAAAkB,eAAA,UAAAA,eAAA,CAAI,KAAK,CAAC,CAAC,EAAC,CAAA1B,QAAA,CAG1FV,KAAK,CAACsC,KAAK,CAACR,GAAG,CAAC,SAAC7B,IAAU,CAAK,CAC5B,GAAM,CAAAsC,eAAgC,CAAG,CAAE,OAAO,CAAEvC,KAAK,CAACM,KAAK,CAAE,OAAO,CAAEN,KAAK,CAACI,KAAM,CAAC,CACvF,mBACIN,IAAA,CAACJ,SAAS,EAAAgB,QAAA,CACLV,KAAK,CAACwC,UAAU,CAAGxC,KAAK,CAACwC,UAAU,CAACD,eAAe,CAAEtC,IAAI,CAAC,CAAGF,iBAAiB,CAACwC,eAAe,CAAEtC,IAAI,CAAC,EAD1FA,IAAI,CAACwC,EAEV,CAAC,CAEpB,CAAC,CAAC,CAEE,CAAC,EAChB,CAED;AACA,MAAO,IAAM,CAAAC,eAAyC,CAAG,QAA5C,CAAAA,eAAyCA,CAAG1C,KAAK,CAAI,CAC9D,IAAA2C,eAAA,CAA0BpD,KAAK,CAACqD,QAAQ,CAAC5C,KAAK,CAACsC,KAAK,CAAC,CAAAO,gBAAA,CAAAC,cAAA,CAAAH,eAAA,IAA9CL,KAAK,CAAAO,gBAAA,IAAER,QAAQ,CAAAQ,gBAAA,IACtBtD,KAAK,CAACwD,SAAS,CAAC,UAAM,CAClBvD,SAAS,CAACwD,iBAAiB,CAACV,KAAK,CAAC,CACtC,CAAC,CAAE,CAACA,KAAK,CAAC,CAAC,CACX,mBAAOxC,IAAA,CAACmC,kBAAkB,CAAAD,aAAA,IAAAA,aAAA,CAAAA,aAAA,IAAUhC,KAAK,MAAEsC,KAAK,CAALA,KAAK,CAAED,QAAQ,CAARA,QAAQ,GAAK,CAAC,CACpE,CAAC,CAED,cAAe,CAAAK,eAAe"},"metadata":{},"sourceType":"module"}