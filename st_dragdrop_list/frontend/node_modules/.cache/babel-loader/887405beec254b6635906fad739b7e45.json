{"ast":null,"code":"var _jsxFileName = \"/Users/marcblomvliet/AURAI/streamlit_components_custom/st_dragdrop_list/frontend/src/ST_DragDropList.tsx\",\n  _s = $RefreshSig$();\n// (1) import Layer\nimport React from 'react';\nimport { Streamlit } from 'streamlit-component-lib';\nimport { Container, Draggable } from 'react-smooth-dnd';\nimport { Paper, Typography } from '@mui/material';\n\n// (2) Types Layer\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction defaultRenderItem(props, item) {\n  var _props$width;\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    sx: {\n      width: (_props$width = props.width) !== null && _props$width !== void 0 ? _props$width : '100%',\n      backgroundColor: props.theme.backgroundColor,\n      padding: 1,\n      border: \"1px solid \" + props.theme.textColor\n    },\n    children: /*#__PURE__*/_jsxDEV(Typography, {\n      color: props.theme.textColor,\n      fontFamily: props.theme.font,\n      children: item.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 9\n  }, this);\n}\nconst applyDrag = (arr, dropResult, initSort) => {\n  const {\n    removedIndex,\n    addedIndex,\n    payload\n  } = dropResult;\n  if (removedIndex === null && addedIndex === null) return arr;\n  const result = [...arr];\n  let itemToAdd = payload;\n  if (removedIndex !== null) {\n    itemToAdd = result.splice(removedIndex, 1)[0];\n  }\n  if (addedIndex !== null) {\n    result.splice(addedIndex, 0, itemToAdd);\n  }\n  if (initSort) {\n    return result.sort((a, b) => a.order - b.order);\n  } else {\n    return result.map((item, idx) => {\n      return {\n        ...item,\n        order: idx\n      };\n    });\n  }\n};\n// (3) DOM Layer\nconst ContainerComponent = props => /*#__PURE__*/_jsxDEV(Container, {\n  onDrop: e => {\n    var _props$initSort;\n    return props.setItems(applyDrag(props.items, e, (_props$initSort = props.initSort) !== null && _props$initSort !== void 0 ? _props$initSort : false));\n  },\n  children: props.items.map(item => {\n    const innerThemeProps = {\n      \"theme\": props.theme,\n      \"width\": props.width\n    };\n    return /*#__PURE__*/_jsxDEV(Draggable, {\n      children: props.renderItem ? props.renderItem(innerThemeProps, item) : defaultRenderItem(innerThemeProps, item)\n    }, item.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }, this);\n  })\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 74,\n  columnNumber: 5\n}, this);\n\n// (4) Container Layer\n_c = ContainerComponent;\nexport const ST_DragDropList = props => {\n  _s();\n  const [items, setItems] = React.useState(props.items);\n  React.useEffect(() => {\n    Streamlit.setComponentValue(items);\n  }, [items]);\n  return /*#__PURE__*/_jsxDEV(ContainerComponent, {\n    ...props,\n    items,\n    setItems\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 12\n  }, this);\n};\n_s(ST_DragDropList, \"Cl2CBpezx+j0qJHLCw6nTD0XXlU=\");\n_c2 = ST_DragDropList;\nexport default ST_DragDropList;\nvar _c, _c2;\n$RefreshReg$(_c, \"ContainerComponent\");\n$RefreshReg$(_c2, \"ST_DragDropList\");","map":{"version":3,"names":["React","Streamlit","Container","Draggable","Paper","Typography","jsxDEV","_jsxDEV","defaultRenderItem","props","item","_props$width","sx","width","backgroundColor","theme","padding","border","textColor","children","color","fontFamily","font","name","fileName","_jsxFileName","lineNumber","columnNumber","applyDrag","arr","dropResult","initSort","removedIndex","addedIndex","payload","result","itemToAdd","splice","sort","a","b","order","map","idx","ContainerComponent","onDrop","e","_props$initSort","setItems","items","innerThemeProps","renderItem","id","_c","ST_DragDropList","_s","useState","useEffect","setComponentValue","_c2","$RefreshReg$"],"sources":["/Users/marcblomvliet/AURAI/streamlit_components_custom/st_dragdrop_list/frontend/src/ST_DragDropList.tsx"],"sourcesContent":["// (1) import Layer\nimport React from 'react';\nimport { Streamlit, Theme } from 'streamlit-component-lib';\nimport { Container, Draggable, DropResult } from 'react-smooth-dnd';\nimport { Paper, Typography } from '@mui/material';\n\n// (2) Types Layer\nexport interface Item {\n    id: string\n    name: string\n    order: number\n}\n\nfunction defaultRenderItem(props: InnerThemeProps, item: Item): React.ReactElement {\n    return (\n        <Paper\n            sx={{\n                width: props.width ?? '100%',\n                backgroundColor: props.theme.backgroundColor,\n                padding: 1,\n                border: \"1px solid \" + props.theme.textColor,\n            }}\n        >\n            <Typography\n                color={props.theme.textColor}\n                fontFamily={props.theme.font}\n            >\n                {item.name}\n            </Typography>\n        </Paper>\n    )\n}\n\nconst applyDrag = (arr: Item[], dropResult: DropResult, initSort: boolean) => {\n    const { removedIndex, addedIndex, payload } = dropResult;\n    if (removedIndex === null && addedIndex === null) return arr;\n\n    const result = [...arr];\n    let itemToAdd = payload;\n\n    if (removedIndex !== null) {\n        itemToAdd = result.splice(removedIndex, 1)[0];\n    }\n\n    if (addedIndex !== null) {\n        result.splice(addedIndex, 0, itemToAdd);\n    }\n\n    if (initSort) {\n        return result.sort((a: Item, b: Item) => a.order - b.order)\n    } else {\n        return result.map((item: Item, idx: number) => {\n            return { ...item, order: idx };\n        });\n    }\n};\n\nexport type ContainerProps = {\n    items: Item[]\n    renderItem?: (theme: InnerThemeProps, item: Item) => React.ReactElement\n    initSort?: boolean\n} & InnerThemeProps\ntype InnerThemeProps = {\n    width?: string\n    theme: Theme\n}\ntype Props = {\n    setItems: React.Dispatch<React.SetStateAction<Item[]>>\n} & ContainerProps\n\n// (3) DOM Layer\nconst ContainerComponent: React.FC<Props> = (props: Props) => (\n\n    <Container\n        onDrop={(e: DropResult) => props.setItems(applyDrag(props.items, e, props.initSort ?? false))}\n    >\n        {\n            props.items.map((item: Item) => {\n                const innerThemeProps: InnerThemeProps = { \"theme\": props.theme, \"width\": props.width }\n                return (\n                    <Draggable key={item.id}>\n                        {props.renderItem ? props.renderItem(innerThemeProps, item) : defaultRenderItem(innerThemeProps, item)}\n                    </Draggable>\n                );\n            })\n        }\n    </Container >\n)\n\n// (4) Container Layer\nexport const ST_DragDropList: React.FC<ContainerProps> = props => {\n    const [items, setItems] = React.useState(props.items);\n    React.useEffect(() => {\n        Streamlit.setComponentValue(items)\n    }, [items])\n    return <ContainerComponent {...{ ...props, items, setItems }} />\n}\n\nexport default ST_DragDropList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}